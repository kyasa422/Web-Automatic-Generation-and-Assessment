import{q as u,W as b,j as e}from"./app-hP37GghH.js";import{D as h}from"./DefaultLayout-Uy6MbqgL.js";import"./index-DNfXVwZQ.js";const N=()=>{const{user:l,roles:k,userRole:m,permissions:o,userPermissions:i}=u().props,{data:a,setData:t,put:n,errors:r}=b({name:l.name,email:l.email,password:"",roles:m,permissions:i?i.map(s=>Number(s)):[]}),c=s=>{s.preventDefault(),n(`/admin/userssiswa/${l.id}`)},p=s=>{const d=parseInt(s.target.value);t("permissions",s.target.checked?[...a.permissions,d]:a.permissions.filter(x=>x!==d))};return console.log("User Permissions from props:",i),console.log("Updated permissions:",a.permissions),e.jsxs(h,{children:[e.jsx("h1",{children:"Edit User Siswa"}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"p-6.5",children:[e.jsxs("div",{className:"w-full xl:w-1/2 mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Name"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>t("name",s.target.value),placeholder:"Enter name",className:"w-full rounded border-[1.5px] px-5 py-3 text-black dark:border-form-strokedark dark:bg-form-input dark:text-white focus:border-primary"}),r.name&&e.jsx("div",{className:"text-red-500",children:r.name})]}),e.jsxs("div",{className:"w-full xl:w-1/2 mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Email"}),e.jsx("input",{type:"email",value:a.email,onChange:s=>t("email",s.target.value),placeholder:"Enter email",className:"w-full rounded border-[1.5px] px-5 py-3 text-black dark:border-form-strokedark dark:bg-form-input dark:text-white focus:border-primary"}),r.email&&e.jsx("div",{className:"text-red-500",children:r.email})]}),e.jsxs("div",{className:"w-full xl:w-1/2 mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Password"}),e.jsx("input",{type:"password",value:a.password,onChange:s=>t("password",s.target.value),placeholder:"Enter Password",className:"w-full rounded border-[1.5px] px-5 py-3 text-black dark:border-form-strokedark dark:bg-form-input dark:text-white focus:border-primary"}),r.password&&e.jsx("div",{className:"text-red-500",children:r.password})]}),e.jsxs("div",{className:"w-full xl:w-1/2 mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Permissions"}),e.jsx("div",{children:o.map(s=>e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"checkbox",value:s.id,checked:a.permissions.includes(Number(s.id)),onChange:p,className:"mr-2"}),s.name]},s.id))}),r.permissions&&e.jsx("div",{className:"text-red-500",children:r.permissions})]})]}),e.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90",children:"Update User"})]})]})};export{N as default};
