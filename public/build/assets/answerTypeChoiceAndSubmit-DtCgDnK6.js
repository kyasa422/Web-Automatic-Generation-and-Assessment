import{q as j,j as t}from"./app-BhVq8jKj.js";import{u as a}from"./store-CnciT7u5.js";import{G as x}from"./index-COzIZR3u.js";const A=()=>{const{env:{GEMINI_API_KEY:o},subject:p}=j().props,s=a(e=>e.request),l=a(e=>e.setRequest),n=a(e=>e.response),c=a(e=>e.updateResponse),r=a(e=>e.isLoading),i=a(e=>e.setIsLoading),u=e=>l(e.target),m=async()=>{try{i(n.length>0?"ADD":"ALL");const e=new x({apiKey:o}),y=p.find(S=>S.id==s.subject).name,d=s.type==0?"UTS":"UAS",b=s.answerType=="ESSAY"?{type:"array",items:{type:"object",properties:{question:{type:"string"},answer:{type:"string"},answerType:{type:"string",enum:["ESSAY"]},label:{type:"string",enum:["uraian_terbatas","uraian_bebas"]}},required:["question","answer","answerType","label"]},minItems:5,maxItems:5}:{type:"array",items:{type:"object",properties:{question:{type:"string"},answerType:{type:"string",enum:["MULTIPLE_CHOICE"]},multipleChoice:{type:"array",items:{type:"object",properties:{text:{type:"string"},isCorrect:{type:"boolean"}},required:["text","isCorrect"]},minItems:4,maxItems:4}},required:["question","answerType","multipleChoice"]},minItems:5,maxItems:5},g=`Buatkan 5 soal berdasarkan parameter berikut:
- class: ${s.class} 
- subject: ${y}
- type: ${d}
- answerType: ${s.answerType}

${s.answerType==="ESSAY"?'Untuk soal essay, setiap soal harus memiliki label "uraian_terbatas" atau "uraian_bebas" secara bergantian.':"Untuk soal pilihan ganda, setiap soal harus memiliki tepat 4 opsi dengan satu jawaban yang benar."}

Buat soal yang berkualitas dan sesuai dengan tingkat kesulitan ${s.class}.`,h=(await e.models.generateContent({contents:g,model:"gemini-2.5-flash",config:{responseMimeType:"application/json",responseSchema:b,temperature:.7}})).text;c(JSON.parse(h))}catch(e){console.error(e)}finally{i(null)}};return t.jsxs("div",{className:"mt-5 flex justify-center items-center gap-4",children:[t.jsxs("select",{className:"select select-bordered w-fit",onChange:u,name:"answerType",value:s.answerType,children:[t.jsx("option",{children:"Pilih Tipe Soal"}),t.jsx("option",{value:"ESSAY",children:"Essay"}),t.jsx("option",{value:"MULTIPLE_CHOICE",children:"Pilihan Ganda"})]}),t.jsxs("button",{className:"btn btn-primary",onClick:m,disabled:r!=null,children:[r==="ALL"?t.jsx("div",{className:"loading"}):null,t.jsxs("span",{children:[n.length>0?"Tambah":"Generate"," 5 Soal"]})]})]})};export{A as default};
