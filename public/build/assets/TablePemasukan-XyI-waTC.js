import{q as N,j as t,a as c}from"./app-3E3hC9iw.js";import{u as i,w}from"./xlsx-DjuO7_Ju.js";import"./flowbite.min-BWEkewtM.js";import{F as g,a as L}from"./index-Dr7Aa12J.js";import{d as _}from"./index-CsfMhOvp.js";const M=()=>{const{laporanMitra:r,startOfWeek:m,endOfWeek:o,nextWeekOffset:b,prevWeekOffset:y}=N().props,n=a=>{_.Inertia.get(route("admin.laporan.mitra"),{weekOffset:a})},l=a=>r.data.reduce((d,x)=>d+(x[a]||0),0),u=(a,d)=>{const x=a.data.map(e=>({Hari:e.hari,Tanggal:e.tanggal,7e3:e.biaya_5000||0,"8.000":e.biaya_8000||0,"10.000":e.biaya_10000||0,"15.000":e.biaya_15000||0,"Total Biaya":e.totalbiaya||0,Daftar:e.daftar||0,Modul:e.modul||0,Kaos:e.kaos||0,Kas:e.kas||0,"Lain Lain":e.lainlain||0,"Total Pemasukan":e.totalpemasukan||0})),f={Hari:"Total",Tanggal:"",7e3:x.reduce((e,s)=>e+s[7e3],0),"8.000":x.reduce((e,s)=>e+s["8.000"],0),"10.000":x.reduce((e,s)=>e+s["10.000"],0),"15.000":x.reduce((e,s)=>e+s["15.000"],0),"Total Biaya":x.reduce((e,s)=>e+s["Total Biaya"],0),Daftar:x.reduce((e,s)=>e+s.Daftar,0),Modul:x.reduce((e,s)=>e+s.Modul,0),Kaos:x.reduce((e,s)=>e+s.Kaos,0),Kas:x.reduce((e,s)=>e+s.Kas,0),"Lain Lain":x.reduce((e,s)=>e+s["Lain Lain"],0),"Total Pemasukan":x.reduce((e,s)=>e+s["Total Pemasukan"],0)};x.push(f);const h=["Hari","Tanggal","7000","8.000","10.000","15.000","Total Biaya","Daftar","Modul","Kaos","Kas","Lain Lain","Total Pemasukan"],k=i.json_to_sheet(x,{header:h});i.sheet_add_aoa(k,[h],{origin:"A1"});const p=i.book_new();i.book_append_sheet(p,k,"Laporan");const j=`Laporan_Pemasukan_mitra_${d}.xlsx`;w(p,j)};return t.jsx("div",{children:t.jsxs("div",{className:"col-span-12 rounded-sm border border-stroke bg-white py-6 shadow-default dark:border-strokedark dark:bg-boxdark",children:[t.jsxs("div",{className:"flex justify-between px-7.5 mb-6",children:[t.jsxs("h4",{className:"text-xl font-semibold text-black dark:text-white",children:["Laporan Pemasukan Mitra ( ",m," sampai"," ",o," )"]}),t.jsxs("div",{children:[t.jsx(c,{href:"/admin/laporan/mitra/create",children:t.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90",children:"Tambah Laporan"})}),t.jsx("button",{onClick:()=>u(r,`${m} sampai ${o}`),className:"bg-green-500 text-white px-4 py-2 rounded ml-2 hover:bg-green-600",children:"Download Excel"})]})]}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-2 dark:bg-meta-4",children:[t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Hari"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Nama"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Tanggal"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"7000"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"8000"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"10.000"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"15.000"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Total Biaya"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Daftar"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Modul"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Kaos"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Kas"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Lain Lain"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Total"}),t.jsx("th",{className:"py-4 px-4 text-center text-sm font-medium text-black dark:text-white",children:"Actions"})]})}),t.jsx("tbody",{children:r.data.map((a,d)=>t.jsxs("tr",{className:"border-b border-stroke dark:border-strokedark",children:[t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white pl-10",children:a.hari}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white pl-10",children:a.user?a.user.name:"N/A"}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.tanggal}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.biaya_5000}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.biaya_8000}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.biaya_10000}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.biaya_15000}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.totalbiaya.toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.daftar.toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.modul.toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.kaos.toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.kas.toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.lainlain.toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.totalpemasukan.toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-center",children:t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx(c,{href:`/admin/laporan/mitra/${a.id}/edit`,children:t.jsx(g,{className:"text-yellow-500 hover:text-yellow-700 cursor-pointer"})}),t.jsx(c,{href:`/admin/laporan/mitra/${a.id}`,method:"delete",as:"button",data:{id:a.id},onClick:x=>{confirm("Are you sure you want to delete this user?")||x.preventDefault()},children:t.jsx(L,{className:"text-red-500 hover:text-red-700 cursor-pointer"})})]})})]},d))}),t.jsx("tfoot",{children:t.jsxs("tr",{className:"bg-gray-2 dark:bg-meta-4 font-semibold",children:[t.jsx("td",{colSpan:"3",className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Total"}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("biaya_5000")}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("biaya_8000")}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("biaya_10000")}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("biaya_15000")}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("totalbiaya").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("daftar").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("modul").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("kaos").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("kas").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("lainlain").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:l("totalpemasukan").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-center text-sm font-medium text-black dark:text-white"})]})})]}),t.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[t.jsx("button",{onClick:()=>n(y),className:"py-2 px-4 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Sebelumnya"}),t.jsx("button",{onClick:()=>n(b),className:"py-2 px-4 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Selanjutnya"})]})]})]})})};export{M as default};
