import{q as h,W as k,j as e}from"./app-YKxtQAKr.js";import{D as f}from"./DefaultLayout-iMLX5co2.js";import"./index-Ht7fSIaI.js";const v=()=>{const{user:d,roles:m,userRole:n,permissions:c,userPermissions:i}=h().props,{data:a,setData:t,put:x,errors:r}=k({name:d.name,email:d.email,password:"",roles:n,permissions:i?i.map(s=>Number(s)):[]}),p=s=>{s.preventDefault(),x(`/admin/users/${d.id}`)},u=s=>{const l=Array.from(s.target.selectedOptions,o=>o.value);t("roles",l)},b=s=>{const l=parseInt(s.target.value);t("permissions",s.target.checked?[...a.permissions,l]:a.permissions.filter(o=>o!==l))};return console.log("User Permissions from props:",i),console.log("Updated permissions:",a.permissions),e.jsxs(f,{children:[e.jsx("h1",{children:"Edit User"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"p-6.5",children:[e.jsxs("div",{className:"w-full xl:w-1/2 mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Name"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>t("name",s.target.value),placeholder:"Enter name",className:"w-full rounded border-[1.5px] px-5 py-3 text-black dark:border-form-strokedark dark:bg-form-input dark:text-white focus:border-primary"}),r.name&&e.jsx("div",{className:"text-red-500",children:r.name})]}),e.jsxs("div",{className:"w-full xl:w-1/2 mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Email"}),e.jsx("input",{type:"email",value:a.email,onChange:s=>t("email",s.target.value),placeholder:"Enter email",className:"w-full rounded border-[1.5px] px-5 py-3 text-black dark:border-form-strokedark dark:bg-form-input dark:text-white focus:border-primary"}),r.email&&e.jsx("div",{className:"text-red-500",children:r.email})]}),e.jsxs("div",{className:"w-full xl:w-1/2 mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Password"}),e.jsx("input",{type:"password",value:a.password,onChange:s=>t("password",s.target.value),placeholder:"Enter Password",className:"w-full rounded border-[1.5px] px-5 py-3 text-black dark:border-form-strokedark dark:bg-form-input dark:text-white focus:border-primary"}),r.password&&e.jsx("div",{className:"text-red-500",children:r.password})]}),e.jsxs("div",{className:"w-full xl:w-1/2 mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Role"}),e.jsx("select",{multiple:!0,value:a.roles,onChange:u,className:"w-full rounded border-[1.5px] px-5 py-3 text-black dark:border-form-strokedark dark:bg-form-input dark:text-white focus:border-primary",children:m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),r.roles&&e.jsx("div",{className:"text-red-500",children:r.roles})]}),e.jsxs("div",{className:"w-full xl:w-1/2 mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Permissions"}),e.jsx("div",{children:c.map(s=>e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"checkbox",value:s.id,checked:a.permissions.includes(Number(s.id)),onChange:b,className:"mr-2"}),s.name]},s.id))}),r.permissions&&e.jsx("div",{className:"text-red-500",children:r.permissions})]})]}),e.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90",children:"Update User"})]})]})};export{v as default};
