import{q as x,W as h,r as f,j as e}from"./app-DDhz2aCE.js";import"./index-BoFNpIju.js";import{D as b}from"./DefaultLayout-BowVWO7B.js";import{S as l}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{w as m}from"./sweetalert2-react-content.es-eZxEkfyZ.js";const y=()=>{const{setting:s,all_permissions:d}=x().props,{data:i,setData:n,put:c,errors:a}=h({question_id:s.question_id,start_time:s.start_time,end_time:s.end_time,permissions:[]});f.useEffect(()=>{if(s&&s.permissions&&s.permissions.length>0){const t=s.permissions.map(r=>r.permission_id);console.log("Setting permissions:",t),n("permissions",t)}},[s,s==null?void 0:s.permissions]),console.log("Current data.permissions:",i.permissions),console.log("Setting permissions:",s==null?void 0:s.permissions);const p=t=>{const r=parseInt(t.target.value);t.target.checked?n("permissions",[...i.permissions,r]):n("permissions",i.permissions.filter(o=>o!==r))},u=t=>{t.preventDefault(),c(route("guru.ulangan-setting.update",s.id),{preserveScroll:!0,onSuccess:()=>{m(l).fire({title:"Berhasil!",text:"Pengaturan ulangan diperbarui.",icon:"success"})},onError:()=>{m(l).fire({title:"Gagal!",text:"Ada kesalahan saat menyimpan.",icon:"error"})}})};return e.jsx(b,{children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Waktu Mulai"}),e.jsx("input",{type:"datetime-local",value:i.start_time,onChange:t=>n("start_time",t.target.value),className:"w-full border px-3 py-2 rounded"}),a.start_time&&e.jsx("p",{className:"text-red-500 text-sm",children:a.start_time})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Waktu Selesai"}),e.jsx("input",{type:"datetime-local",value:i.end_time,onChange:t=>n("end_time",t.target.value),className:"w-full border px-3 py-2 rounded"}),a.end_time&&e.jsx("p",{className:"text-red-500 text-sm",children:a.end_time})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Izin Kelas"}),e.jsx("div",{className:"space-y-1",children:d.map(t=>{const r=i.permissions&&i.permissions.includes(t.id)||s.permissions&&s.permissions.some(o=>o.permission_id===t.id);return e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",value:t.id,checked:r,onChange:p}),e.jsx("span",{children:t.name})]},t.id)})}),a.permissions&&e.jsx("p",{className:"text-red-500 text-sm",children:a.permissions})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded shadow",children:"Simpan Perubahan"})]})})};export{y as default};
