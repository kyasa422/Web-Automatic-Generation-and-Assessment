import{q as j,j as t}from"./app-DYOkymjs.js";import{u as a}from"./store-De6A2R9p.js";import{G as x}from"./index-COzIZR3u.js";const k=()=>{const{env:{GEMINI_API_KEY:l},subject:r}=j().props,s=a(e=>e.request),c=a(e=>e.setRequest),i=a(e=>e.response),u=a(e=>e.updateResponse),o=a(e=>e.isLoading),p=a(e=>e.setIsLoading),m=e=>c(e.target),y=async()=>{try{p(i.length>0?"ADD":"ALL");const e=new x({apiKey:l}),d=r.find(n=>n.id==s.subject).name,b=s.type==0?"UTS":"UAS",g=s.answerType=="ESSAY"?{type:"array",items:{type:"object",properties:{question:{type:"string"},answer:{type:"string"},answerType:{type:"string",enum:["ESSAY"]},label:{type:"string",enum:["uraian_terbatas","uraian_bebas"]}},required:["question","answer","answerType","label"]},minItems:5,maxItems:5}:{type:"array",items:{type:"object",properties:{question:{type:"string"},answerType:{type:"string",enum:["MULTIPLE_CHOICE"]},multipleChoice:{type:"array",items:{type:"object",properties:{text:{type:"string"},isCorrect:{type:"boolean"}},required:["text","isCorrect"]},minItems:4,maxItems:4}},required:["question","answerType","multipleChoice"]},minItems:5,maxItems:5},h=`Buatkan 5 soal berdasarkan parameter berikut:
- class: ${s.class} 
- subject: ${d}
- type: ${b}
- answerType: ${s.answerType}

${s.answerType==="ESSAY"?'Untuk soal essay, setiap soal harus memiliki label "uraian_terbatas" atau "uraian_bebas" secara bergantian.':"Untuk soal pilihan ganda, setiap soal harus memiliki tepat 4 opsi dengan satu jawaban yang benar."}


Soal harus sesuai capaian umum sebagai berikut:
${r.find(n=>n.id==s.subject).context}
Buat soal yang berkualitas dan sesuai dengan tingkat kesulitan ${s.class}.`,S=(await e.models.generateContent({contents:h,model:"gemini-2.5-flash",config:{responseMimeType:"application/json",responseSchema:g,temperature:.7}})).text;u(JSON.parse(S))}catch(e){console.error(e)}finally{p(null)}};return t.jsxs("div",{className:"mt-5 flex justify-center items-center gap-4",children:[t.jsxs("select",{className:"select select-bordered w-fit",onChange:m,name:"answerType",value:s.answerType,children:[t.jsx("option",{children:"Pilih Tipe Soal"}),t.jsx("option",{value:"ESSAY",children:"Essay"}),t.jsx("option",{value:"MULTIPLE_CHOICE",children:"Pilihan Ganda"})]}),t.jsxs("button",{className:"btn btn-primary",onClick:y,disabled:o!=null,children:[o==="ALL"?t.jsx("div",{className:"loading"}):null,t.jsxs("span",{children:[i.length>0?"Tambah":"Generate"," 5 Soal"]})]})]})};export{k as default};
