import{q as h,W as w,j as s}from"./app-C1gcJEC4.js";import{D as x}from"./DefaultLayout-DTE2COqg.js";import{l as b}from"./lodash-QLjWokDY.js";import{S as l}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import"./index-Desza5-n.js";const v=()=>{const{ulangan:t}=h().props,c=e=>b.shuffle(e),{data:r,setData:m,post:d,processing:o}=w({answers:t.question.question_inquiries.map(e=>({...e,multiple_choice:c(e.multiple_choice),question_inquiry_id:"",answer:""}))}),u=(e,n,a)=>{const i=[...r.answers];i[a].question_inquiry_id=e,i[a].answer=n,m("answers",i)},p=()=>{if(r.answers.some(e=>e.answer=="")){l.fire({icon:"warning",title:"Oops!",text:"Silakan isi semua jawaban sebelum mengumpulkan."});return}d(route("siswa.ujian.submit",t.id),{onSuccess:()=>{l.fire({icon:"success",title:"Berhasil!",text:"Jawaban Anda telah berhasil dikumpulkan.",confirmButtonText:"OK"}).then(()=>{window.location.href=route("siswa.dashboard")})},onError:e=>{console.error("Ada error:",e),l.fire({icon:"error",title:"Gagal",text:"Terjadi kesalahan saat mengirim jawaban."})},onFinish:()=>{console.log("Selesai kirim")}})};return s.jsx(x,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Ujian: ",t.question.subject.name]}),s.jsx("div",{className:"space-y-6",children:r.answers.map((e,n)=>s.jsxs("div",{className:"border p-4 bg-white rounded",children:[s.jsxs("p",{className:"font-semibold mb-2",children:[n+1,". ",e.question]}),e.multiple_choice.length===0?s.jsx("div",{className:"mt-4",children:s.jsx("textarea",{value:e.answer,onChange:a=>u(e.id,a.target.value,n),rows:"4",className:"w-full p-2 border rounded",placeholder:"Tulis jawaban Anda di sini..."})}):s.jsx("div",{className:"space-y-2 mt-2",children:e.multiple_choice.map(a=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:`answer-${n}`,value:a.text,checked:e.answer===a.text,onChange:()=>u(e.id,a.text,n)}),s.jsx("span",{children:a.text})]},a.id))})]},e.id))}),s.jsx("button",{onClick:p,disabled:o,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:o?"Mengirim...":"Kumpulkan Jawaban"})]})})};export{v as default};
